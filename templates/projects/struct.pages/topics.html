{% extends "common/home.html" %}
{% load static %}
{% load extra_tags %}

{% block extra_css %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'projects/css/topics.css' %}">
{% endblock %}

<!-- body content -->

{% block main_window %}
<div class="main-win">
    <div class="main-content">

        <div class="page-wrap pg2-wrap" style="margin-top: 75px;">
            <div class="top-text top-text-b full pb-3" id="pg2-acc-speak-field" value="{{ CHOICE_HEADING|striptags }}. {{ CHOICE_SUBTEXT|striptags }}">{{ CHOICE_HEADING|safe }}</div>
            <div class="top-text top-text-sm full">{{ CHOICE_SUBTEXT|safe }}</div>
            <div class="pg2-question">
                <div class="accessibility" style="display: flex; align-items: center;">

                    <div class="regen-answer btn btn-light">
                        <svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="sync" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-sync fa-w-16 fa-9x"><path fill="currentColor" d="M500 8h-27.711c-6.739 0-12.157 5.548-11.997 12.286l2.347 98.575C418.212 52.043 342.256 8 256 8 134.813 8 33.933 94.924 12.296 209.824 10.908 217.193 16.604 224 24.103 224h28.576c5.674 0 10.542-3.982 11.737-9.529C83.441 126.128 161.917 60 256 60c79.545 0 147.942 47.282 178.676 115.302l-126.39-3.009c-6.737-.16-12.286 5.257-12.286 11.997V212c0 6.627 5.373 12 12 12h192c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12zm-12.103 280h-28.576c-5.674 0-10.542 3.982-11.737 9.529C428.559 385.872 350.083 452 256 452c-79.546 0-147.942-47.282-178.676-115.302l126.39 3.009c6.737.16 12.286-5.257 12.286-11.997V300c0-6.627-5.373-12-12-12H12c-6.627 0-12 5.373-12 12v192c0 6.627 5.373 12 12 12h27.711c6.739 0 12.157-5.548 11.997-12.286l-2.347-98.575C93.788 459.957 169.744 504 256 504c121.187 0 222.067-86.924 243.704-201.824 1.388-7.369-4.308-14.176-11.807-14.176z" class=""></path></svg>
                        Regenerate topics
                    </div>

                    <div class="help-answer btn btn-light acc-help" data-helptext="{{ PAGE_TIP }}">
                        Help
                        <div class="help-answer-svg-wrap">
                            <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="question" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="svg-inline--fa fa-question fa-w-12 fa-9x"><path fill="currentColor" d="M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z" class=""></path></svg>
                        </div>
                    </div>
                </div>
            </div>
            <hr class="sep">
            <div class="pg2-content">
                <div class="pg2-fields">
                    
                    <ul class="vischsl-container pg2-vischsl">
                        {% if CHOICE_SVGS %}
                            
                            {% for opt in CHOICES %}
                            <li class="vischsl-item pg2-vischsl-opt-voice {% if opt.0 == curr_value %}sel{% endif %}" id="pg2vischsl{{ forloop.counter }}" optval="{{opt.0}}">
                                <div class="vischsl-item-icon">
                                    {{ CHOICE_SVGS|get_dict_item:opt.0|safe }}
                                </div>
                                <div class="vischsl-item-text pg2-vischsl-voice-text">{{opt.1}}</div>
                            </li>
                            {% endfor %}
                            
                            {% else %}
                            
                            {% for opt in CHOICES %}
                            <li class="vischsl-item pg2-vischsl-opt-voice {% if opt.0 == curr_value %}sel{% endif %}" id="pg2vischsl{{ forloop.counter }}" optval="{{opt.0}}" style="justify-content: center; padding: 0">
                                <div class="vischsl-item-text pg2-vischsl-voice-text" style="margin-top: 0; font-size: 16px; line-height: 23px;">
                                    {{opt}}
                                </div>
                            </li>
                            {% endfor %}

                        {% endif %}
                    </ul>

                    
                </div>
            </div>
            <div class="pg1-fields-secondary">
                <span class="pg1-fs-inp">
                    <button type="button" class="btn btn-light" id="btn_add_subtopic">
                        <svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="plus" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="svg-inline--fa fa-plus fa-w-12 fa-9x"><path fill="currentColor" d="M368 224H224V80c0-8.84-7.16-16-16-16h-32c-8.84 0-16 7.16-16 16v144H16c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h144v144c0 8.84 7.16 16 16 16h32c8.84 0 16-7.16 16-16V288h144c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z" class=""></path></svg>
                    </button>

                    <input type="text" class="form-control  cust-input" id="field_add_subtopic" placeholder="Add your own subtopic..." maxlength="1000" {% if curr_value %}value="{{ curr_value }}"{% endif %}>
                </span>
                <div class="accessibility">
                    <button type="button" class="btn btn-light acc-opt acc-mic" data-fieldid="field_add_subtopic">
                        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="microphone" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" class="svg-inline--fa fa-microphone fa-w-11 fa-9x"><path fill="currentColor" d="M176 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96zm160-160h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16z" class=""></path></svg>
                    </button>
                    <button type="button" class="btn btn-light acc-opt acc-speak" data-fieldid="pg2-acc-speak-field">
                        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="volume" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512" class="svg-inline--fa fa-volume fa-w-15 fa-9x"><path fill="currentColor" d="M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.53 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z" class=""></path></svg>
                    </button>
                    <button type="button" class="btn btn-light acc-opt acc-help" data-helptext="{{ PAGE_TIP }}">
                        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="question" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="svg-inline--fa fa-question fa-w-12 fa-9x"><path fill="currentColor" d="M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z" class=""></path></svg>
                    </button>
                </div>
            </div>
            <div class="pg2-buttons">
                {% if BACK_URL %}
                <button type="button" class="btn btn-dark cust-button" id="btn_back_updproj" onclick="event.preventDefault(); pageCleanup(); window.location.href='{% if BACK_URL_ATTR %}{% url BACK_URL project.slug BACK_URL_ATTR %}{% else %}{% url BACK_URL project.slug %}{% endif %}'">Back</button>
                {% endif %}
                <button type="button" class="btn btn-dark cust-button align-right" id="btn_next_updproj">Continue</button>
            </div>
            
            <div class="noshow" style="opacity: 0; position: absolute; top: 0; z-index: -100;">
                {{ PROJECT_SVG|safe }}
            </div>

            <div class="sidebar-right-secondary"><div class="side-wrap"><div class="side-id" style="display: none; width: 0; height: 0;"></div><div class="side-header"></div><div class="side-content"></div></div></div>
        </div>
        
    </div>
</div>
{% endblock %}

<!-- end body content -->

{% block hidden_content %}
<form method="POST" id="project_update_form">
    {% csrf_token %}
    <input type="text" {% if curr_value %}value="{{ curr_value }}"{% endif %} name="{{FORM_INPUT_NAME}}" id="projFormInp-upd">
    {% if FORCE_NEXT %}
    <input type="checkbox" name="force_next" value="ForceNext" checked>
    {% endif %}
</form>
{% endblock %}

{% block extra_js %}
<!-- <script src="https://cdn.jsdelivr.net/npm/microsoft-cognitiveservices-speech-sdk@latest/distrib/browser/microsoft.cognitiveservices.speech.sdk.bundle-min.js" defer></script> -->
<script src="{% static 'common/js/text-voice.js' %}" type="text/javascript" defer></script>
<script>
    // page constants
    const user_firstName = "{{ request.user.first_name }}";
    const user_lastName = "{{ request.user.last_name }}";
    const user_fullName = "{{ request.user.get_full_name }}";
    const user_email = "{{ request.user.email }}";
    const url_projCreate = "{% url 'project-create' %}";
    const proj_choice_curr_value = {% if curr_value %}"{{ curr_value }}"{% else %}null{% endif %};
    const vischsl_minsel_count = {% if CHOICE_MINSEL_COUNT %}{{ CHOICE_MINSEL_COUNT }}{% else %}1{% endif %};
</script>
{% include CONTENT_PAGE_PATH %}
<script src="{% static 'common/js/accessibility.js' %}" type="text/javascript" defer></script>
<script src="{% static 'projects/js/struct.topics.js' %}" type="text/javascript" defer></script>
{% endblock %}